<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Portail d'Applications</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    body {
        background: linear-gradient(to bottom right, #e6f0ff, #f7fbff);
    }
    .dark body {
        background: linear-gradient(to bottom right, #111827, #1a1f2c);
    }
    .card:hover {
        box-shadow: 0 20px 30px rgba(0, 0, 0, 0.1);
    }
    .dark .card:hover {
        box-shadow: 0 20px 30px rgba(0, 0, 0, 0.3);
    }

    /* Animations */
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    @keyframes slideIn {
        from { transform: translateX(-20px); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
    }

    .animate-fade-in {
        animation: fadeIn 0.5s ease-out forwards;
    }

    .animate-slide-in {
        animation: slideIn 0.3s ease-out forwards;
    }

    /* Transitions fluides */
    * {
        transition: background-color 0.3s, border-color 0.3s, color 0.3s, box-shadow 0.3s;
    }

    /* Bulles en arri√®re-plan */
    .bubble {
        position: fixed;
        border-radius: 50%;
        background: radial-gradient(circle at 30% 30%, rgba(100, 200, 255, 0.1), rgba(255, 255, 255, 0.05));
        backdrop-filter: blur(5px);
        z-index: -1;
        animation: float 20s infinite ease-in-out;
        mix-blend-mode: overlay;
    }

    .dark .bubble {
        background: radial-gradient(circle at 30% 30%, rgba(96, 165, 250, 0.08), rgba(96, 165, 250, 0.03));
        mix-blend-mode: screen;
    }

    @keyframes float {
        0% { transform: translate(0, 0) rotate(0deg); }
        33% { transform: translate(30px, -50px) rotate(120deg); }
        66% { transform: translate(-20px, 20px) rotate(240deg); }
        100% { transform: translate(0, 0) rotate(360deg); }
    }
  </style>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {}
      }
    }
  </script>
</head>
<body class="min-h-screen flex flex-col text-gray-800 dark:text-gray-200">
  <!-- Header -->
  <header class="w-full bg-white/90 dark:bg-gray-900/90 backdrop-blur sticky top-0 z-50 border-b border-gray-200 dark:border-gray-800">
    <div class="max-w-screen-xl mx-auto px-4 py-6 flex justify-between items-center">
      <h1 class="text-3xl font-bold text-blue-600 dark:text-blue-400">üåü Mes Apps</h1>
      <button id="themeToggle" class="rounded-full p-2 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-300">
        <i data-lucide="sun" class="w-5 h-5 hidden transition-transform duration-300 rotate-0 dark:rotate-180" id="icon-light"></i>
        <i data-lucide="moon" class="w-5 h-5 transition-transform duration-300 rotate-0 dark:rotate-180" id="icon-dark"></i>
      </button>
    </div>
  </header>

    <!-- Pr√©sentation -->
    <section class="max-w-screen-xl mx-auto px-2 py-8 sticky top-20 z-40 transition-transform duration-300 hover:-translate-y-1">
    <div class="bg-white/90 dark:bg-gray-900/90 backdrop-blur-md rounded-2xl p-6 shadow-lg border border-gray-200 dark:border-gray-800 transition-all duration-300">
        <div class="flex items-start gap-4">
        <div class="flex-grow">
            <h2 class="text-2xl font-bold mb-3 text-blue-700 dark:text-blue-300">Bienvenue sur mon Portail d'Applications</h2>
            <p class="text-gray-700 dark:text-gray-300 leading-relaxed">D√©couvrez tous mes projets web, outils pratiques et bien plus.</p>
        </div>
        <div class="hidden sm:flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400">
            <i data-lucide="info" class="w-5 h-5"></i>
            <span class="whitespace-nowrap">Filtrez et explorez</span>
        </div>
        </div>
    </div>
    </section>

  <!-- Filtres et recherche -->
  <section class="max-w-screen-xl mx-auto px-2 py-4">
    <div class="flex flex-wrap gap-4 justify-between items-center">
      <input type="text" id="searchInput" placeholder="Rechercher..." class="w-full sm:w-auto flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400">
      <select id="sortSelect" class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none">
        <option value="">Trier par</option>
        <option value="name">Nom (A-Z)</option>
        <option value="recent">R√©cent</option>
      </select>
    </div>
  </section>

  <!-- Galerie d'apps -->
  <main class="max-w-screen-xl mx-auto px-1 py-6 grid gap-10 grid-cols-1 sm:grid-cols-3 lg:grid-cols-3" id="appGallery">
    <!-- Cartes inject√©es dynamiquement -->
  </main>

  <!-- Footer -->
  <footer class="text-center py-6 text-sm text-blue-700 dark:text-blue-300">
    ¬© 2025 Cl√©ment Jonghmans ‚Äî <a href="mailto:contact@exemple.com" class="underline">Contact</a>
  </footer>

  <script>
    // Mode sombre/clair toggle
    const toggle = document.getElementById('themeToggle');
    const lightIcon = document.getElementById('icon-light');
    const darkIcon = document.getElementById('icon-dark');
    const html = document.documentElement;

    // V√©rifier la pr√©f√©rence enregistr√©e ou le th√®me syst√®me
    if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      html.classList.add('dark');
    }

    function updateThemeIcon() {
      const isDark = html.classList.contains('dark');
      lightIcon.style.display = isDark ? 'inline' : 'none';
      darkIcon.style.display = isDark ? 'none' : 'inline';
    }

    toggle.addEventListener('click', () => {
      html.classList.toggle('dark');
      // Sauvegarder la pr√©f√©rence
      localStorage.theme = html.classList.contains('dark') ? 'dark' : 'light';
      updateThemeIcon();
    });

    // Initialiser l'ic√¥ne au chargement
    updateThemeIcon();

    // Charger les applications depuis JSON
    async function loadApps() {
      const res = await fetch('apps.json');
      const data = await res.json();
      return data;
    }

    function renderApps(apps) {
      const gallery = document.getElementById('appGallery');
      gallery.innerHTML = '';

        if (apps.length === 0) {
            const noResults = document.createElement('div');
            noResults.className = 'col-span-full text-center py-12 animate-fade-in';
            noResults.innerHTML = `
            <i data-lucide="search-x" class="w-12 h-12 mx-auto text-gray-400 dark:text-gray-600 mb-4"></i>
            <p class="text-xl text-gray-600 dark:text-gray-400">Aucun r√©sultat trouv√©</p>
            <p class="text-sm text-gray-500 dark:text-gray-500 mt-2">Essayez avec d'autres termes de recherche</p>
            `;
            gallery.appendChild(noResults);
            lucide.createIcons();
            return;
        }

      apps.forEach((app, index) => {
        const card = document.createElement('a');
        card.href = app.link;
        card.target = '_blank';
        card.className = 'card group block bg-white/90 dark:bg-gray-900/90 rounded-2xl p-8 shadow-lg transition-all duration-300 hover:scale-[1.02] relative overflow-hidden min-h-[250px] flex flex-col border border-gray-200 dark:border-gray-800 hover:border-blue-200 dark:hover:border-blue-800 opacity-0';

        // Animation d√©cal√©e pour chaque carte
        setTimeout(() => {
            card.style.animation = `fadeIn 0.5s ease-out ${index * 0.1}s forwards`;
        }, 0);

        card.innerHTML = `
            <div class="flex items-center gap-4 mb-6">
                ${app.icon ? `<i data-lucide="${app.icon}" class="w-8 h-8 text-blue-600 dark:text-blue-400"></i>` : ''}
                <h3 class="text-2xl font-bold text-gray-900 dark:text-gray-100">${app.name}</h3>
            </div>
            <p class="text-base text-gray-700 dark:text-gray-300 mb-6 flex-grow">${app.description}</p>
            <div class="flex justify-between items-center mt-auto">
                <span class="text-base text-blue-600 dark:text-blue-400 group-hover:underline">Ouvrir l'application</span>
                ${app.github ? `<a href="${app.github}" target="_blank" onclick="event.stopPropagation(); event.preventDefault(); window.open('${app.github}','_blank')" class="text-sm text-gray-600 dark:text-gray-400 hover:text-blue-500 dark:hover:text-blue-300 underline">Code source</a>` : ''}
            </div>
        `;
        gallery.appendChild(card);
      });

      lucide.createIcons();
    }

    function applySearchAndSort(apps) {
      const search = document.getElementById('searchInput').value.toLowerCase();
      const sort = document.getElementById('sortSelect').value;

      let filtered = apps.filter(app => app.name.toLowerCase().includes(search));

      if (sort === 'name') {
        filtered.sort((a, b) => a.name.localeCompare(b.name));
      } else if (sort === 'recent') {
        filtered.sort((a, b) => new Date(b.date || '2020-01-01') - new Date(a.date || '2020-01-01'));
      }

      renderApps(filtered);
    }

    let allApps = [];
    loadApps().then(apps => {
      allApps = apps;
      renderApps(apps);
    });

    document.getElementById('searchInput').addEventListener('input', () => applySearchAndSort(allApps));
    document.getElementById('sortSelect').addEventListener('change', () => applySearchAndSort(allApps));

    // Cr√©ation des bulles en arri√®re-plan
    function createBubbles() {
        const bubbleContainer = document.createElement('div');
        bubbleContainer.style.position = 'fixed';
        bubbleContainer.style.width = '100%';
        bubbleContainer.style.height = '100%';
        bubbleContainer.style.top = '0';
        bubbleContainer.style.left = '0';
        bubbleContainer.style.zIndex = '-1';
        bubbleContainer.style.overflow = 'hidden';
        document.body.appendChild(bubbleContainer);

        const bubbles = 6; // Nombre de bulles
        for (let i = 0; i < bubbles; i++) {
            const bubble = document.createElement('div');
            bubble.className = 'bubble';
            
            // Taille al√©atoire
            const size = Math.random() * 300 + 100;
            bubble.style.width = `${size}px`;
            bubble.style.height = `${size}px`;
            
            // Position al√©atoire
            bubble.style.left = `${Math.random() * 100}%`;
            bubble.style.top = `${Math.random() * 100}%`;
            
            // Animation d√©cal√©e
            bubble.style.animationDelay = `${Math.random() * 10}s`;
            bubble.style.animationDuration = `${15 + Math.random() * 15}s`;
            
            bubbleContainer.appendChild(bubble);
        }
    }

    // Appeler la fonction apr√®s le chargement de la page
    window.addEventListener('load', createBubbles);
  </script>
</body>
</html>